(function(t){function e(e){for(var n,o,s=e[0],l=e[1],c=e[2],p=0,d=[];p<s.length;p++)o=s[p],Object.prototype.hasOwnProperty.call(a,o)&&a[o]&&d.push(a[o][0]),a[o]=0;for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(t[n]=l[n]);u&&u(e);while(d.length)d.shift()();return i.push.apply(i,c||[]),r()}function r(){for(var t,e=0;e<i.length;e++){for(var r=i[e],n=!0,s=1;s<r.length;s++){var l=r[s];0!==a[l]&&(n=!1)}n&&(i.splice(e--,1),t=o(o.s=r[0]))}return t}var n={},a={app:0},i=[];function o(e){if(n[e])return n[e].exports;var r=n[e]={i:e,l:!1,exports:{}};return t[e].call(r.exports,r,r.exports,o),r.l=!0,r.exports}o.m=t,o.c=n,o.d=function(t,e,r){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(o.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)o.d(r,n,function(e){return t[e]}.bind(null,n));return r},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/vlinder/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],l=s.push.bind(s);s.push=e,s=s.slice();for(var c=0;c<s.length;c++)e(s[c]);var u=l;i.push([0,"chunk-vendors"]),r()})({0:function(t,e,r){t.exports=r("cd49")},cd49:function(t,e,r){"use strict";r.r(e);r("e260"),r("e6cf"),r("cca6"),r("a79d");var n=r("2b0e"),a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-app",[r("v-app-bar",{attrs:{app:"",color:"primary",dark:"",dense:""}},[r("v-toolbar-title",[t._v("VLINDER")]),r("v-spacer"),r("v-btn",{attrs:{href:"http://vlinder.ugent.be",target:"_blank",text:""}},[r("span",{staticClass:"mr-2"},[t._v("VLINDER website")]),r("v-icon",[t._v("mdi-open-in-new")])],1)],1),r("v-content",[r("v-container",[r("v-row",[r("v-col",{attrs:{sm:"12",md:"10","offset-md":"1"}},[r("StationsMap")],1)],1)],1)],1)],1)},i=[],o=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"text-center"},[r("v-toolbar",{attrs:{flat:""}},[r("v-toolbar-title",[t._v(t._s(t.weatherProperties[t.weatherProperty].title))]),r("v-spacer"),r("v-btn-toggle",{attrs:{mandatory:""},model:{value:t.weatherProperty,callback:function(e){t.weatherProperty=e},expression:"weatherProperty"}},t._l(t.weatherProperties,(function(e){return r("v-tooltip",{key:e.property,attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(n){var a=n.on;return[r("v-btn",t._g({attrs:{value:e.property}},a),[r("v-icon",[t._v(t._s(e.icon))])],1)]}}],null,!0)},[r("span",[t._v(t._s(e.name))])])})),1)],1),r("div",{attrs:{id:t.mapId}})],1)},s=[],l=(r("d81d"),r("d4ec")),c=r("bee2"),u=r("262e"),p=r("2caf"),d=r("9ab4"),h=r("60a3"),m=(r("99af"),r("4de4"),r("a15b"),r("b0c0"),r("4ec9"),r("d3b7"),r("3ca3"),r("ddb0"),r("96cf"),r("1da1")),f=r("5698"),v=r("d217");r("ac1f"),r("25f0"),r("5319");function g(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=e.color,n=e.title,a=e.tickSize,i=void 0===a?6:a,o=e.width,s=void 0===o?320:o,l=e.height,c=void 0===l?44+i:l,u=e.marginTop,p=void 0===u?18:u,d=e.marginRight,h=void 0===d?0:d,m=e.marginBottom,v=void 0===m?16+i:m,g=e.marginLeft,b=void 0===g?0:g,w=e.ticks,k=void 0===w?s/64:w,j=e.tickFormat,x=e.tickValues,P=f["b"]("svg").attr("width",s).attr("height",c).attr("viewBox",[0,0,s,c]).style("overflow","visible").style("display","block"),O=function(t){return t.selectAll(".tick line").attr("y1",p+v-c)};if(r.interpolate){var _=Math.min(r.domain().length,r.range().length);t=r.copy().rangeRound(f["l"](f["h"](b,s-h),_)),P.append("image").attr("x",b).attr("y",p).attr("width",s-b-h).attr("height",c-p-v).attr("preserveAspectRatio","none").attr("xlink:href",y(r.copy().domain(f["l"](f["h"](0,1),_))).toDataURL())}else if(r.interpolator){if(t=Object.assign(r.copy().interpolator(f["i"](b,s-h)),{range:function(){return[b,s-h]}}),P.append("image").attr("x",b).attr("y",p).attr("width",s-b-h).attr("height",c-p-v).attr("preserveAspectRatio","none").attr("xlink:href",y(r.interpolator()).toDataURL()),!t.ticks){if(void 0===x){var S=Math.round(k+1);x=f["m"](S).map((function(t){return f["k"](r.domain(),t/(S-1))}))}"function"!==typeof j&&(j=f["e"](void 0===j?",f":j))}}else if(r.invertExtent){var V=r.thresholds?r.thresholds():r.quantiles?r.quantiles():r.domain(),M=void 0===j?function(t){return t}:"string"===typeof j?f["e"](j):j;t=f["o"]().domain([-1,r.range().length-1]).rangeRound([b,s-h]),P.append("g").selectAll("rect").data(r.range()).join("rect").attr("x",(function(e,r){return t(r-1)})).attr("y",p).attr("width",(function(e,r){return t(r)-t(r-1)})).attr("height",c-p-v).attr("fill",(function(t){return t})),x=f["m"](V.length),j=function(t){return M(V[t],t)}}else t=f["n"]().domain(r.domain()).rangeRound([b,s-h]),P.append("g").selectAll("rect").data(r.domain()).join("rect").attr("x",t).attr("y",p).attr("width",Math.max(0,t.bandwidth()-1)).attr("height",c-p-v).attr("fill",r),O=function(){};return P.append("g").attr("transform","translate(0,".concat(c-v,")")).call(f["a"](t).ticks(k,"string"===typeof j?j:void 0).tickFormat("function"===typeof j?j:void 0).tickSize(i).tickValues(x)).call(O).call((function(t){return t.select(".domain").remove()})).call((function(t){return t.append("text").attr("x",b).attr("y",p+v-c-6).attr("fill","currentColor").attr("text-anchor","start").attr("font-weight","bold").text(n)})),P.node()}function y(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:256,r=f["b"]("canvas").attr("width",e).attr("height",1).node(),n=r.getContext("2d"),a=0;a<e;++a)n.fillStyle=t(a/(e-1)),n.fillRect(a,0,1,1);return r}var b=function(){function t(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"temp";Object(l["a"])(this,t),this.selectedProperty="temp",this.measurementsMap=new Map,this.margin={top:5,right:10,bottom:50,left:10},this.width=900,this.height=420,this.selector=e,this.setProperty(r)}return Object(c["a"])(t,[{key:"fetchData",value:function(){var t=Object(m["a"])(regeneratorRuntime.mark((function t(){var e,r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=fetch("https://raw.githubusercontent.com/bmesuere/belgium-topojson/master/belgium.json").then((function(t){return t.json()})),r=fetch("https://mooncake.ugent.be/api/stations").then((function(t){return t.json()})),n=fetch("https://mooncake.ugent.be/api/measurements").then((function(t){return t.json()})),t.next=5,e;case 5:return this.belgium=t.sent,t.next=8,r;case 8:return this.stations=t.sent,t.next=11,n;case 11:this.measurements=t.sent,this.measurementsMap=new Map(this.measurements.map((function(t){return[t.id,t]}))),this.belgium.objects.municipalities.geometries=this.belgium.objects.municipalities.geometries.filter((function(t){return"03000"!==t.properties.reg_nis}));case 14:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"init",value:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(){var r,n,a,i,o=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.fetchData();case 2:this.colorScale=f["p"](f["j"]).domain(f["d"](this.measurements,(function(t){return t[o.selectedProperty]}))),r=f["f"]().fitExtent([[this.margin.left,this.margin.top],[this.width-this.margin.right,this.height-this.margin.bottom]],v["a"](this.belgium,this.belgium.objects.municipalities)),n=f["g"]().projection(r),a=f["q"](this.selector).append("svg").attr("viewBox","0, 0, ".concat(this.width,", ").concat(this.height)),i=f["q"]("body").append("div").attr("class","tooltip").style("position","absolute").style("visibility","visible").style("background-color","white").style("padding","6px").style("border","1px solid #dddddd").style("border-radius","3px").style("pointer-events","none").style("font","12px Roboto"),a.append("g").selectAll(".muni").data(v["a"](this.belgium,this.belgium.objects.municipalities).features).join("path").attr("class","muni").attr("fill","#eeeeee").attr("stroke","white").attr("stroke-linejoin","round").attr("d",n).append("title").text((function(t){var e;return null===t||void 0===t||null===(e=t.properties)||void 0===e?void 0:e.name_nl})),this.stationDots=a.append("g").selectAll(".station").data(this.stations).join("circle").attr("class","station").attr("id",(function(t){return"station-"+t.id})).attr("r",(function(t){var e;return"Ok"===(null===(e=o.measurementsMap.get(t.id))||void 0===e?void 0:e.status)?4:1})).attr("fill-opacity",(function(t){var e;return"Ok"===(null===(e=o.measurementsMap.get(t.id))||void 0===e?void 0:e.status)?.7:1})).attr("fill",(function(t){var e=o.measurementsMap.get(t.id);return"Ok"===(null===e||void 0===e?void 0:e.status)?o.colorScale(e[o.selectedProperty]):"black"})).attr("cx",(function(t){return r([t.coordinates.longitude,t.coordinates.latitude])[0]})).attr("cy",(function(t){return r([t.coordinates.longitude,t.coordinates.latitude])[1]})).on("mouseenter",(function(t){f["q"]("#station-"+t.id).attr("fill-opacity",1).attr("r",5),o.tooltip(i,t,f["c"].pageX,f["c"].pageY)})).on("mouseleave",(function(t){f["q"]("#station-"+t.id).attr("r",(function(t){var e;return"Ok"===(null===(e=o.measurementsMap.get(t.id))||void 0===e?void 0:e.status)?4:1})).attr("fill-opacity",(function(t){var e;return"Ok"===(null===(e=o.measurementsMap.get(t.id))||void 0===e?void 0:e.status)?.7:1})),o.tooltip(i,null)})),this.legend=a.append("g").attr("transform","translate(".concat(this.margin.left,", ").concat(this.height-this.margin.top-40,")")),this.legend.append((function(){return g({color:o.colorScale,title:t.weatherProperties[o.selectedProperty].legend,width:200,tickSize:-10,ticks:4})}));case 11:case"end":return e.stop()}}),e,this)})));function r(){return e.apply(this,arguments)}return r}()},{key:"tooltip",value:function(e,r,n,a){var i=this;if(!r)return e.style("visibility","hidden");e.style("visibility","visible").style("top",a+5+"px").style("left",n+15+"px").html("");var o="<b>".concat(r.given_name,"</b> - ").concat(r.city);o+=["temp","rainVolume","windSpeed"].map((function(e){return"<br>".concat(t.weatherProperties[e].name,": <b>").concat(i.measurementsMap.get(r.id)[e]," ").concat(t.weatherProperties[e].unit,"</b>")})).join(""),e.html(o)}},{key:"setProperty",value:function(e){this.selectedProperty=t.weatherProperties.hasOwnProperty(e)?e:"temp"}},{key:"updateProperty",value:function(t){this.setProperty(t),this.update()}},{key:"update",value:function(){var e=this;this.legend.html(""),this.colorScale.domain(f["d"](this.measurements,(function(t){return t[e.selectedProperty]}))),this.legend.append((function(){return g({color:e.colorScale,title:t.weatherProperties[e.selectedProperty].legend,width:200,tickSize:-10,ticks:4})})),this.stationDots.transition().attr("r",(function(t){var r;return"Ok"===(null===(r=e.measurementsMap.get(t.id))||void 0===r?void 0:r.status)?4:1})).attr("fill-opacity",(function(t){var r;return"Ok"===(null===(r=e.measurementsMap.get(t.id))||void 0===r?void 0:r.status)?.7:1})).attr("fill",(function(t){var r=e.measurementsMap.get(t.id);return"Ok"===(null===r||void 0===r?void 0:r.status)?e.colorScale(r[e.selectedProperty]):"black"}))}}]),t}();b.weatherProperties={temp:{property:"temp",name:"Temperatuur",legend:"Temperatuur (°C)",icon:"mdi-thermometer",title:"Temperatuur op dit moment",unit:"°C"},rainVolume:{property:"rainVolume",name:"Neerslag",legend:"Neerslag vandaag (l/m²)",icon:"mdi-weather-rainy",title:"Neerslag sinds middernacht",unit:"l/m²"},windSpeed:{property:"windSpeed",name:"Windsnelheid",legend:"Windsnelheid (km/u)",icon:"mdi-weather-windy",title:"Windsnelheid op dit moment",unit:"km/u"}};var w=function(t){Object(u["a"])(r,t);var e=Object(p["a"])(r);function r(){var t;return Object(l["a"])(this,r),t=e.apply(this,arguments),t.weatherProperties=b.weatherProperties,t.weatherProperty="temp",t}return Object(c["a"])(r,[{key:"mounted",value:function(){this.map=new b("#".concat(this.mapId),this.weatherProperty),this.map.init()}},{key:"weatherPropertyChanged",value:function(t,e){this.map&&this.map.updateProperty(this.weatherProperty)}}]),r}(h["c"]);Object(d["a"])([Object(h["b"])({default:"stationsMap"})],w.prototype,"mapId",void 0),Object(d["a"])([Object(h["d"])("weatherProperty")],w.prototype,"weatherPropertyChanged",null),w=Object(d["a"])([h["a"]],w);var k=w,j=k,x=r("2877"),P=r("6544"),O=r.n(P),_=r("8336"),S=r("a609"),V=r("132d"),M=r("2fa4"),R=r("71d9"),T=r("2a7f"),C=r("3a2f"),A=Object(x["a"])(j,o,s,!1,null,null,null),D=A.exports;O()(A,{VBtn:_["a"],VBtnToggle:S["a"],VIcon:V["a"],VSpacer:M["a"],VToolbar:R["a"],VToolbarTitle:T["a"],VTooltip:C["a"]});var B=n["a"].extend({name:"App",components:{StationsMap:D},data:function(){return{}}}),I=B,q=r("7496"),E=r("40dc"),L=r("62ad"),N=r("a523"),z=r("a75b"),W=r("0fd9"),$=Object(x["a"])(I,a,i,!1,null,null,null),F=$.exports;O()($,{VApp:q["a"],VAppBar:E["a"],VBtn:_["a"],VCol:L["a"],VContainer:N["a"],VContent:z["a"],VIcon:V["a"],VRow:W["a"],VSpacer:M["a"],VToolbarTitle:T["a"]});var J=r("f309");n["a"].use(J["a"]);var U=new J["a"]({});n["a"].config.productionTip=!1,new n["a"]({vuetify:U,render:function(t){return t(F)}}).$mount("#app")}});
//# sourceMappingURL=app.4fff0788.js.map